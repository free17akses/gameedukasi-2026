<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GAVIN G.E BERKAH PERKASA</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
    <style>
        body { margin: 0; background: #1a1a1a; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
        
        /* Parental Control UI */
        #parent-btn { position: fixed; bottom: 15px; left: 15px; padding: 10px 15px; background: #546e7a; color: white; border: 2px solid #fff; border-radius: 20px; cursor: pointer; z-index: 1000; font-size: 12px; font-weight: bold; }
        #parent-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 4000; color: white; flex-direction: column; justify-content: center; align-items: center; }
        .gate-box { background: white; color: #333; padding: 25px; border-radius: 15px; text-align: center; box-shadow: 0 0 20px rgba(255,255,255,0.2); }
        
        /* Youtube Container */
        #video-container { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; height: 80%; background: white; z-index: 3000; border: 4px solid #4caf50; border-radius: 15px; }
        #close-video { position: absolute; top: -45px; right: 0; background: #f44336; color: white; border: none; padding: 8px 15px; cursor: pointer; border-radius: 5px; font-weight: bold; }
        iframe { width: 100%; height: 100%; border-radius: 10px; }
    </style>
</head>
<body>

    <div id="game-container"></div>

    <button id="parent-btn" onclick="openGate()">‚öôÔ∏è ORANG TUA</button>

    <div id="parent-overlay">
        <div id="security-gate" class="gate-box">
            <h3>KUNCI ORANG TUA</h3>
            <p id="math-question"></p>
            <input type="number" id="gate-answer" style="width:60px; padding:10px; font-size:20px; text-align:center;">
            <br><br>
            <button onclick="checkGate()" style="background:#4caf50; color:white; border:none; padding:10px 20px; cursor:pointer; border-radius:5px; font-weight:bold;">BUKA</button>
            <button onclick="closeOverlay()" style="background:#999; color:white; border:none; padding:10px 20px; cursor:pointer; border-radius:5px;">BATAL</button>
        </div>
        <div id="monitor-info" style="display:none; text-align:center;">
            <h2>üìä PANTAUAN GAVIN</h2>
            <h1 id="total-time-display" style="font-size: 50px; color: #ffeb3b;">0m 0s</h1>
            <p>Dikembangkan oleh: Ardianto Wahyu Nugroho</p>
            <button onclick="closeOverlay()" style="background:#546e7a; color:white; border:none; padding:10px 20px; cursor:pointer; border-radius:5px;">TUTUP</button>
        </div>
    </div>

    <div id="video-container">
        <button id="close-video" onclick="closeVideo()">TUTUP VIDEO [X]</button>
        <iframe id="yt-player" src="" frameborder="0" allowfullscreen></iframe>
    </div>

<script>
    // --- GLOBAL LOGIC ---
    let totalSecs = 0;
    let currentAns = 0;
    setInterval(() => {
        totalSecs++;
        document.getElementById('total-time-display').innerText = `${Math.floor(totalSecs/60)}m ${totalSecs%60}s`;
    }, 1000);

    function openGate() {
        let a = Math.floor(Math.random()*3)+2; 
        let b = Math.floor(Math.random()*3)+2;
        currentAns = a * b;
        document.getElementById('math-question').innerText = `Berapa ${a} x ${b} ?`;
        document.getElementById('parent-overlay').style.display = 'flex';
        document.getElementById('security-gate').style.display = 'block';
        document.getElementById('monitor-info').style.display = 'none';
        document.getElementById('gate-answer').value = '';
    }

    function checkGate() {
        if(parseInt(document.getElementById('gate-answer').value) === currentAns) {
            document.getElementById('security-gate').style.display = 'none';
            document.getElementById('monitor-info').style.display = 'block';
        } else { alert("Salah! Hanya untuk Orang Tua."); closeOverlay(); }
    }

    function closeOverlay() { document.getElementById('parent-overlay').style.display = 'none'; }
    
    function playVideo(url) {
        document.getElementById('yt-player').src = url;
        document.getElementById('video-container').style.display = 'block';
    }

    function closeVideo() {
        document.getElementById('yt-player').src = "";
        document.getElementById('video-container').style.display = 'none';
    }

    function playClap() {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        for(let i=0; i<4; i++) {
            const osc = ctx.createOscillator(); const g = ctx.createGain();
            osc.type = 'triangle'; g.gain.setValueAtTime(0.1, ctx.currentTime + (i*0.1));
            g.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + (i*0.1) + 0.05);
            osc.connect(g); g.connect(ctx.destination);
            osc.start(ctx.currentTime + (i*0.1)); osc.stop(ctx.currentTime + (i*0.1) + 0.05);
        }
    }

    // --- PHASER SCENES ---

    class LoginScene extends Phaser.Scene {
        constructor() { super('LoginScene'); }
        create() {
            const { width, height } = this.scale;
            this.add.rectangle(width/2, height/2, width, height, 0xfff176);
            this.add.text(width/2, height*0.3, 'GAVIN G.E BERKAH PERKASA', { fontSize:'45px', fill:'#1a237e', fontWeight:'900', stroke:'#fff', strokeThickness:8 }).setOrigin(0.5);
            let btn = this.add.rectangle(width/2, height*0.6, 350, 90, 0x4caf50).setInteractive({useHandCursor:true});
            this.add.text(width/2, height*0.6, 'MASUK BERMAIN', {fontSize:'32px', fill:'#fff', fontWeight:'bold'}).setOrigin(0.5);
            btn.on('pointerdown', () => this.scene.start('MenuScene'));
            this.add.text(width/2, height-30, 'Created by: Ardianto Wahyu Nugroho', {fontSize:'14px', fill:'#546e7a'}).setOrigin(0.5);
        }
    }

    class MenuScene extends Phaser.Scene {
        constructor() { super('MenuScene'); }
        create() {
            const { width, height } = this.scale;
            this.add.rectangle(width/2, height/2, width, height, 0xbbdefb);
            const opts = [
                {t: 'üéÆ LEVEL BERMAIN (1-6)', s: 'Level1'},
                {t: 'üìñ IQRO FLIPBOOK', s: 'IqroFlip'},
                {t: 'üì∫ VIDEO BELAJAR IQRO', v: 'https://www.youtube.com/embed/b6XQDH-nnU0'},
                {t: 'üôè VIDEO DOA HARIAN', v: 'https://www.youtube.com/embed/90vW_DpBLrI'},
                {t: '‚öôÔ∏è LEVEL SELANJUTNYA', s: 'DevMode'}
            ];
            opts.forEach((o, i) => {
                let b = this.add.rectangle(width/2, 120 + (i*85), width*0.7, 65, 0x4caf50).setInteractive({useHandCursor:true});
                this.add.text(width/2, 120 + (i*85), o.t, {fontSize:'22px', fill:'#fff', fontWeight:'bold'}).setOrigin(0.5);
                b.on('pointerdown', () => o.v ? playVideo(o.v) : this.scene.start(o.s));
            });
        }
    }

    class IqroFlip extends Phaser.Scene {
        constructor() { super('IqroFlip'); }
        init() { this.page = 0; this.data = [{a:'ÿß ÿ®', n:'Alif Ba'}, {a:'ÿ™ ÿ´', n:'Ta Tsa'}, {a:'ÿ¨ ÿ≠ ÿÆ', n:'Ja Ha Kha'}, {a:'ÿØ ÿ∞ ÿ± ÿ≤', n:'Da Dza Ro Za'}]; }
        create() {
            const { width, height } = this.scale;
            this.add.rectangle(width/2, height/2, width, height, 0xffffff);
            this.txt = this.add.text(width/2, height/2, '', {fontSize:'150px', fill:'#000'}).setOrigin(0.5);
            this.lbl = this.add.text(width/2, height*0.2, '', {fontSize:'30px', fill:'#333'}).setOrigin(0.5);
            this.updatePage();
            let n = this.add.rectangle(width*0.8, height*0.8, 120, 50, 0x2196f3).setInteractive();
            this.add.text(width*0.8, height*0.8, 'LANJUT', {fill:'#fff'}).setOrigin(0.5);
            n.on('pointerdown', () => { if(this.page < this.data.length-1){ this.page++; this.updatePage(); }});
            let b = this.add.text(width/2, height*0.9, 'KEMBALI KE MENU', {fill:'#f44336'}).setOrigin(0.5).setInteractive();
            b.on('pointerdown', () => this.scene.start('MenuScene'));
        }
        updatePage() { this.txt.setText(this.data[this.page].a); this.lbl.setText(this.data[this.page].n); }
    }

    class DevMode extends Phaser.Scene {
        constructor() { super('DevMode'); }
        create() {
            const { width, height } = this.scale;
            this.add.rectangle(width/2, height/2, width, height, 0x263238);
            const g = this.add.text(width/2, height*0.4, '‚öôÔ∏è', {fontSize:'100px'}).setOrigin(0.5);
            this.tweens.add({targets:g, angle:360, duration:3000, repeat:-1});
            this.add.text(width/2, height*0.6, 'LEVEL SELANJUTNYA\nDALAM PENGEMBANGAN', {fontSize:'30px', fill:'#ffeb3b', align:'center'}).setOrigin(0.5);
            this.add.text(width/2, height*0.75, 'Oleh: Ardianto Wahyu Nugroho', {fontSize:'20px', fill:'#fff', fontStyle:'italic'}).setOrigin(0.5);
            let b = this.add.text(width/2, height*0.9, 'KEMBALI', {fontSize:'24px', fill:'#4caf50'}).setOrigin(0.5).setInteractive();
            b.on('pointerdown', () => this.scene.start('MenuScene'));
        }
    }

    class Level1 extends Phaser.Scene {
        constructor() { super('Level1'); }
        create() {
            const { width, height } = this.scale;
            this.add.rectangle(width/2, height/2, width, height, 0xeeeeee);
            this.add.text(width/2, height*0.4, 'LEVEL BERMAIN 1-6\nSEDANG DISIAPKAN', {fontSize:'32px', fill:'#333', align:'center'}).setOrigin(0.5);
            let b = this.add.text(width/2, height*0.7, 'KEMBALI KE MENU', {fontSize:'24px', fill:'#007bff'}).setOrigin(0.5).setInteractive();
            b.on('pointerdown', () => this.scene.start('MenuScene'));
        }
    }

    const config = {
        type: Phaser.AUTO,
        parent: 'game-container',
        scale: { mode: Phaser.Scale.FIT, autoCenter: Phaser.Scale.CENTER_BOTH, width: 800, height: 600 },
        scene: [LoginScene, MenuScene, IqroFlip, DevMode, Level1]
    };
    new Phaser.Game(config);
</script>
</body>
</html>
